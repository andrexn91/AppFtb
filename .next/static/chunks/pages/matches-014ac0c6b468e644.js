(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{4869:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/matches",function(){return a(2465)}])},2465:function(t,e,a){"use strict";a.r(e);var i=a(5893),n=a(7294),r=a(9500),s=a(8281),c=a.n(s);e.default=()=>{let[t,e]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0),[o,l]=(0,n.useState)(null),[h,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let fetchMatches=async()=>{try{let t=await (0,r.h_)();e(t),s(!1)}catch(t){l("Errore nel caricamento delle partite."),s(!1)}};fetchMatches()},[]);let handleBooking=async t=>{if(!h){u(!0);try{let a=await (0,r.y_)(t);e(a),alert("Prenotazione effettuata con successo!")}catch(t){alert("Errore nella prenotazione: "+t)}finally{u(!1)}}};return a?(0,i.jsx)("p",{children:"Caricamento partite in corso..."}):o?(0,i.jsx)("p",{children:o}):(0,i.jsxs)("div",{className:c().matchesPage,children:[(0,i.jsx)("h1",{children:"Lista Partite"}),(0,i.jsx)("p",{children:"Trova una partita e prenota il tuo posto!"}),(0,i.jsxs)("div",{className:c().matchList,children:[t.map(t=>(0,i.jsxs)("div",{className:"".concat(c().matchCard," ").concat(t.participants>=t.maxParticipants?c().fullMatch:""),children:[(0,i.jsx)("h2",{children:t.location}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Data:"})," ",t.date]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Orario:"})," ",t.time]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Partecipanti:"})," ",t.participants,"/",t.maxParticipants]}),(0,i.jsx)("button",{className:c().joinButton,disabled:h||t.participants>=t.maxParticipants,onClick:()=>handleBooking(t.id),children:t.participants>=t.maxParticipants?"Partita Piena":"Prenotati"})]},t.id)),0===t.length&&(0,i.jsx)("p",{children:"Non ci sono partite disponibili al momento."})]})]})}},9500:function(t,e,a){"use strict";a.d(e,{Pj:function(){return deleteMatch},h_:function(){return getMatches},nT:function(){return addMatch},ts:function(){return getCurrentUser},x4:function(){return login},y_:function(){return bookMatch}});let i=[{id:1,date:"2025-01-10",time:"18:00",location:"Campo Sportivo Centro",participants:8,maxParticipants:10,description:"Partita amichevole aperta a tutti i livelli."},{id:2,date:"2025-01-12",time:"20:00",location:"Stadio Comunale",participants:5,maxParticipants:10,description:"Partita serale per giocatori esperti."}],getMatches=async()=>new Promise(t=>{setTimeout(()=>t(i),500)}),addMatch=async t=>new Promise(e=>{setTimeout(()=>{i.push({...t,id:i.length+1}),e()},500)}),deleteMatch=async t=>new Promise(e=>{setTimeout(()=>{i=i.filter(e=>e.id!==t),e()},500)}),bookMatch=async t=>new Promise((e,a)=>{setTimeout(()=>{let n=i.find(e=>e.id===t);n&&n.participants<n.maxParticipants?(n.participants+=1,e(i)):a("Impossibile prenotare: partita piena o non trovata.")},500)}),n=null,r=[{id:1,email:"user@example.com",role:"user"},{id:2,email:"admin@example.com",role:"admin"}],login=async(t,e)=>new Promise((e,a)=>{setTimeout(()=>{let i=r.find(e=>e.email===t);i?(n=i,e(i)):a("Credenziali non valide.")},500)}),getCurrentUser=async()=>new Promise(t=>{setTimeout(()=>t(n),500)})},8281:function(t){t.exports={matchesPage:"MatchesPage_matchesPage__jW5F5",matchList:"MatchesPage_matchList__v1tL6",matchCard:"MatchesPage_matchCard__i1MXb",fullMatch:"MatchesPage_fullMatch__z440j",joinButton:"MatchesPage_joinButton__F29II"}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=4869)}),_N_E=t.O()}]);