(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return a(4631)}])},4631:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return admin}});var n=a(5893),i=a(7294),r=a(9500),l=a(7041),s=a.n(l),components_AdminPanel=()=>{let[t,e]=(0,i.useState)([]),[a,l]=(0,i.useState)(!0),[c,o]=(0,i.useState)(null),[d,u]=(0,i.useState)({id:0,date:"",time:"",location:"",participants:0,maxParticipants:10});(0,i.useEffect)(()=>{let fetchMatches=async()=>{try{let t=await (0,r.h_)();e(t),l(!1)}catch(t){o("Errore nel caricamento delle partite."),l(!1)}};fetchMatches()},[]);let handleAddMatch=async()=>{try{await (0,r.nT)(d);let t=await (0,r.h_)();e(t),u({id:0,date:"",time:"",location:"",participants:0,maxParticipants:10}),alert("Partita aggiunta con successo!")}catch(t){alert("Errore nell'aggiunta della partita.")}},handleDeleteMatch=async t=>{try{await (0,r.Pj)(t);let a=await (0,r.h_)();e(a),alert("Partita eliminata con successo!")}catch(t){alert("Errore nell'eliminazione della partita.")}};return a?(0,n.jsx)("p",{children:"Caricamento partite in corso..."}):c?(0,n.jsx)("p",{children:c}):(0,n.jsxs)("div",{className:s().adminPanelContainer,children:[(0,n.jsx)("h1",{children:"Pannello di Amministrazione"}),(0,n.jsxs)("div",{className:s().formSection,children:[(0,n.jsx)("h2",{children:"Crea Nuova Partita"}),(0,n.jsxs)("label",{children:["Data:",(0,n.jsx)("input",{type:"date",value:d.date,onChange:t=>u({...d,date:t.target.value})})]}),(0,n.jsxs)("label",{children:["Orario:",(0,n.jsx)("input",{type:"time",value:d.time,onChange:t=>u({...d,time:t.target.value})})]}),(0,n.jsxs)("label",{children:["Luogo:",(0,n.jsx)("input",{type:"text",value:d.location,onChange:t=>u({...d,location:t.target.value})})]}),(0,n.jsxs)("label",{children:["Numero Massimo di Partecipanti:",(0,n.jsx)("input",{type:"number",value:d.maxParticipants,onChange:t=>u({...d,maxParticipants:Number(t.target.value)})})]}),(0,n.jsx)("button",{onClick:handleAddMatch,className:s().addButton,children:"Aggiungi Partita"})]}),(0,n.jsxs)("div",{className:s().matchList,children:[(0,n.jsx)("h2",{children:"Lista Partite"}),t.map(t=>(0,n.jsxs)("div",{className:s().matchCard,children:[(0,n.jsx)("h3",{children:t.location}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Data:"})," ",t.date]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Orario:"})," ",t.time]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Partecipanti Massimi:"})," ",t.maxParticipants]}),(0,n.jsx)("button",{onClick:()=>handleDeleteMatch(t.id),className:s().deleteButton,children:"Elimina"})]},t.id))]})]})},admin=()=>{let[t,e]=(0,i.useState)(null),[a,l]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{let fetchUser=async()=>{let t=await (0,r.ts)();(null==t?void 0:t.role)!=="admin"?window.location.href="/":e(t),l(!1)};fetchUser()},[]),a)?(0,n.jsx)("p",{children:"Caricamento..."}):t?(0,n.jsx)(components_AdminPanel,{}):null}},9500:function(t,e,a){"use strict";a.d(e,{Pj:function(){return deleteMatch},h_:function(){return getMatches},nT:function(){return addMatch},ts:function(){return getCurrentUser},x4:function(){return login},y_:function(){return bookMatch}});let n=[{id:1,date:"2025-01-10",time:"18:00",location:"Campo Sportivo Centro",participants:8,maxParticipants:10,description:"Partita amichevole aperta a tutti i livelli."},{id:2,date:"2025-01-12",time:"20:00",location:"Stadio Comunale",participants:5,maxParticipants:10,description:"Partita serale per giocatori esperti."}],getMatches=async()=>new Promise(t=>{setTimeout(()=>t(n),500)}),addMatch=async t=>new Promise(e=>{setTimeout(()=>{n.push({...t,id:n.length+1}),e()},500)}),deleteMatch=async t=>new Promise(e=>{setTimeout(()=>{n=n.filter(e=>e.id!==t),e()},500)}),bookMatch=async t=>new Promise((e,a)=>{setTimeout(()=>{let i=n.find(e=>e.id===t);i&&i.participants<i.maxParticipants?(i.participants+=1,e(n)):a("Impossibile prenotare: partita piena o non trovata.")},500)}),i=null,r=[{id:1,email:"user@example.com",role:"user"},{id:2,email:"admin@example.com",role:"admin"}],login=async(t,e)=>new Promise((e,a)=>{setTimeout(()=>{let n=r.find(e=>e.email===t);n?(i=n,e(n)):a("Credenziali non valide.")},500)}),getCurrentUser=async()=>new Promise(t=>{setTimeout(()=>t(i),500)})},7041:function(t){t.exports={adminPanelContainer:"AdminPanel_adminPanelContainer__In7lA",formSection:"AdminPanel_formSection__WxIPI",addButton:"AdminPanel_addButton__09wfY",matchList:"AdminPanel_matchList__lpBOa",matchCard:"AdminPanel_matchCard__bLVKl",deleteButton:"AdminPanel_deleteButton__67PuS"}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=577)}),_N_E=t.O()}]);